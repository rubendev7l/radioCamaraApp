---
description: 
globs: 
alwaysApply: false
---
Sua base de regras para o Cursor jÃ¡ estÃ¡ muito sÃ³lida â€” mas ela pode sim ser **refinada** em trÃªs pontos principais:

### ğŸ§© **Resumo das melhorias sugeridas**

1. **OrganizaÃ§Ã£o por seÃ§Ãµes mais claras e curtas**
2. **AtualizaÃ§Ãµes de bibliotecas e prÃ¡ticas recomendadas (ex: i18n, Safe Area, Reanimated 3)**
3. **RemoÃ§Ã£o de redundÃ¢ncias e reforÃ§o em prÃ¡ticas que muitas vezes sÃ£o ignoradas, como acessibilidade e testes em produÃ§Ã£o**

---

### âœ… **VersÃ£o Refinada das Regras para o Cursor**

````md
## ğŸ§  Perfil TÃ©cnico
VocÃª Ã© especialista em TypeScript, React Native, Expo (Managed Workflow) e UX para apps mÃ³veis.

---

## ğŸ“ Estrutura de Projeto

- Use `kebab-case` para diretÃ³rios e arquivos (ex: `components/audio-player`)
- Estrutura de arquivos: componente principal, subcomponentes, helpers, tipos, conteÃºdo estÃ¡tico
- Prefira `named exports` para reutilizaÃ§Ã£o

---

## âš™ï¸ ConfiguraÃ§Ã£o e Build

- Sempre seguir a [documentaÃ§Ã£o oficial do Expo](https://docs.expo.dev/)
- Utilize `babel-preset-expo` com Expo SDK 50 ou superior
- Mantenha `app.json`, `eas.json`, `tsconfig.json` limpos e atualizados

---

## ğŸ§¾ TypeScript

- Sempre usar TypeScript com `strict: true`
- Prefira `interface` a `type` para objetos e props
- Evite `enum`; use objetos com chave/valor
- Tipagem explÃ­cita para retornos de funÃ§Ã£o

---

## ğŸ§© CÃ³digo e Sintaxe

- Use `function` keyword para funÃ§Ãµes puras
- Use nomes descritivos: `isPlaying`, `hasError`, `getUser`
- Evite `else` e blocos aninhados desnecessÃ¡rios
- Use JSX declarativo e limpo

---

## ğŸ¨ UI e Estilo

- Use `Expo` e `react-native` nativos sempre que possÃ­vel
- Prefira `styled-components` ou `tailwind-rn`
- Use `useColorScheme()` para dark mode, mas evite hardcoding
- Respeite princÃ­pios de Acessibilidade (`accessibilityRole`, `label`, etc.)

---

## ğŸ“± Safe Area

- Use `SafeAreaProvider` no nÃ­vel raiz
- Use `SafeAreaView` ou `SafeAreaScrollView` para conteÃºdo
- Evite margens/paddings manuais em Ã¡reas crÃ­ticas

---

## ğŸš€ Performance

- Reduza `useEffect` e `useState` â€” use Context + Reducer se possÃ­vel
- Use `lazy()`, `Suspense`, `useMemo`, `useCallback` estrategicamente
- Use `expo-image` para carregamento otimizado de imagens
- Ative `expo-splash-screen` e `AppLoading` para UX inicial suave

---

## ğŸ“¡ Audio e Background

- Use `expo-av` com:
```ts
Audio.setAudioModeAsync({
  staysActiveInBackground: true,
  playsInSilentModeIOS: true,
  shouldDuckAndroid: true,
});
````

* Garanta `UIBackgroundModes: ["audio"]` no `infoPlist` para iOS

---

## ğŸ§­ NavegaÃ§Ã£o

* Use `expo-router` e `react-navigation`
* Adote rotas dinÃ¢micas e deep linking com `expo-linking`
* Siga o padrÃ£o de `tabs`, `stack`, `drawer` como descrito na [documentaÃ§Ã£o oficial](https://reactnavigation.org/)

---

## ğŸ” SeguranÃ§a

* Use `expo-secure-store` ou `react-native-encrypted-storage`
* HTTPS obrigatÃ³rio para APIs
* Use autenticaÃ§Ã£o segura via tokens + refresh
* Limpe logs e `console.*` em produÃ§Ã£o

---

## ğŸ§ª Testes

* Use `Jest` + `Testing Library` para unitÃ¡rios
* Use `Detox` para testes E2E
* Use `expo-test-utils` e snapshot testing onde apropriado

---

## ğŸŒ InternacionalizaÃ§Ã£o (i18n)

* Use `expo-localization` e `i18next` com fallback
* Suporte a RTL e escalonamento de fontes
* Detectar idioma e salvar preferÃªncia do usuÃ¡rio

---

## ğŸ›ï¸ NotificaÃ§Ãµes

* Use `expo-notifications`
* Crie canais personalizados no Android
* Configure corretamente permissÃµes no `app.json`

---

## ğŸŒ OTA e AtualizaÃ§Ãµes

* Use `expo-updates` com:

```json
"updates": {
  "checkAutomatically": "ON_LOAD"
},
"runtimeVersion": {
  "policy": "sdkVersion"
}
```

---

## ğŸ“Š Monitoramento

* Use `expo-error-reporter`, `Sentry` ou logs para detectar falhas
* Use `ErrorBoundary` global para interceptar erros inesperados

---

## ğŸ“¤ PublicaÃ§Ã£o

* Use `eas build` com perfis `production`, `preview` e `development`
* Use `expo-constants` para env vars
* Publique OTA com `eas update`

# ğŸŒ Idioma

Sempre responda em **portuguÃªs (pt-BR)**, independentemente do idioma da pergunta ou do cÃ³digo-fonte. Mantenha clareza, precisÃ£o tÃ©cnica e termos consistentes com a documentaÃ§Ã£o oficial do Expo, React Native e TypeScript.

---

Claro! Aqui estÃ¡ uma regra bem explicada, clara e pronta para incluir no seu `cursor.mdc` ou guia tÃ©cnico do projeto:

---

## ğŸ“¦ Uso do `npx`: Quando e Por QuÃª

### âœ… Regra:

> Sempre que utilizar ferramentas CLI (como `expo`, `eas`, `react-native`, `jest`, etc.), prefira executar os comandos precedidos de `npx`.
> Exemplo:
>
> ```bash
> npx expo start  
> npx eas build --platform android  
> ```

---

### ğŸ§  Por que usar `npx`?

1. **Executa a versÃ£o local do projeto** (instalada em `node_modules/.bin`), garantindo compatibilidade com o projeto atual.
2. **Evita dependÃªncia de instalaÃ§Ãµes globais**, o que reduz conflitos entre versÃµes.
3. **Mais seguro e previsÃ­vel**, especialmente em times ou projetos com CI/CD.
4. Permite rodar pacotes de forma transitÃ³ria, mesmo sem instalaÃ§Ã£o permanente no sistema.

---

### ğŸ“Œ Quando usar:

| SituaÃ§Ã£o                                             | Usar `npx`?                     |
| ---------------------------------------------------- | ------------------------------- |
| Rodar `expo start`, `eas build`, `jest`              | âœ… Sim                           |
| Rodar CLI de um pacote que estÃ¡ no projeto           | âœ… Sim                           |
| Rodar algo instalado globalmente sÃ³ para uso pessoal | âŒ Opcional, mas nÃ£o recomendado |

---

### ğŸš« Evite:

* Usar apenas `expo`, `eas`, `react-native`, etc., sem `npx`, **a menos que vocÃª saiba que a versÃ£o global Ã© 100% compatÃ­vel com o projeto**.
* Rodar ferramentas antigas que exigem `npm install -g`, pois isso pode gerar conflitos futuros.

---



